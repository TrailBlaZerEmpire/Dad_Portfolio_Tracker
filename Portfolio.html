<!DOCTYPE html>
<html lang="en" class="light">
<head>
  <meta charset="UTF-8" />
  <title>Portfolio Design</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="stylesheet" as="style" onload="this.rel='stylesheet'" href="https://fonts.googleapis.com/css2?display=swap&family=Manrope:wght@400;500;700;800&family=Noto+Sans:wght@400;500;700;900" />

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

  <!-- Remix Icons (for sun/moon) -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />

  <!-- Custom Styles -->
  <style>
    .text-green-500 { color: #4ade80; }
    .text-red-500 { color: #f87171; }
    .text-yellow-300 { color: #fde047; }
    td { transition: color 0.3s ease; }
  </style>
</head>

<body 
  class="relative flex size-full min-h-screen flex-col dark group/design-root overflow-x-hidden"
  style="
    font-family: Manrope, 'Noto Sans', sans-serif;
    background: linear-gradient(135deg, #0f1b07, #1a2e10) fixed;
    background-image: radial-gradient(circle at 1px 1px, rgba(255,255,255,0.1) 1px, transparent 0);
    background-size: 50px 50px;
    min-height: 100vh;
  "
>
  <div class="layout-container flex h-full grow flex-col">
    <!-- Your entire content stays exactly the same -->    

    <!-- Header -->
    <header class="flex items-center justify-between border-b border-solid border-b-[#2d372a] px-10 py-3">
      <div class="flex items-center gap-8">
        <div class="flex items-center gap-4 text-white">
          <div class="size-4">
            <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M44 4H30.6666V17.3334H17.3334V30.6666H4V44H44V4Z" fill="currentColor"></path>
            </svg>
          </div>
          <h2 class="text-white text-lg font-bold leading-tight tracking-[-0.015em]">MahaVishnu Legacy</h2>
        </div>

        <!-- Navigation -->
        <nav class="flex items-center gap-9">
          <a class="text-white text-sm font-medium leading-normal" href="index.html">Home</a>
          <a class="text-white text-sm font-medium leading-normal" href="Portfolio.html">Portfolio</a>
          <a class="text-white text-sm font-medium leading-normal" href="#">Learn</a>
        </nav>
      </div>

      <!-- Right-side Icons -->
      <div class="flex flex-1 justify-end gap-8">
        <!-- Search -->
        <label class="flex flex-col min-w-40 !h-10 max-w-64">
          <div class="flex w-full flex-1 items-stretch rounded-xl h-full">
            <div class="text-[#a5b6a0] flex border-none bg-[#2d372a] items-center justify-center pl-4 rounded-l-xl border-r-0">
              <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                <path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"></path>
              </svg>
            </div>
            <input placeholder="Search" class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-white focus:outline-0 focus:ring-0 border-none bg-[#2d372a] h-full placeholder:text-[#a5b6a0] px-4 rounded-l-none border-l-0 pl-2 text-base font-normal leading-normal" value="" />
          </div>
        </label>

        <!-- Notification Bell -->
        <button class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 bg-[#2d372a] text-white gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5">
          <div data-icon="Bell" data-size="20px" data-weight="regular">
            <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
              <path d="M221.8,175.94C216.25,166.38,208,139.33,208,104a80,80,0,1,0-160,0c0,35.34-8.26,62.38-13.81,71.94A16,16,0,0,0,48,200H88.81a40,40,0,0,0,78.38,0H208a16,16,0,0,0,13.8-24.06ZM128,216a24,24,0,0,1-22.62-16h45.24A24,24,0,0,1,128,216ZM48,184c7.7-13.24,16-43.92,16-80a64,64,0,1,1,128,0c0,36.05,8.28,66.73,16,80Z"></path>
            </svg>
          </div>
        </button>

        <!-- Profile Image -->
        <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuAK9PZdzTSw56-rgTc_lxX5pVyrAXvWu011UhSn_VY29d5-qYEx5gH3yGTbpxgD-zg6bQQVKcsq4oOb9jRZ5qm62_stJbHp68106Jipj8iLsfc0LkO36aayjfiXNRbyLerCg0apF3Ehzu9F5fTUS7-ujS1_P-7VBhSnUMFQDxjjhYhBIdLERCIEaf3bOH-EtY9QB2k8o1g7IKvx7Ca2yhZ_9R59Bjhj2eeacdNWkCZh-LRUShruv5tLfCmYG7VVG2IOfxYcrDEPpIQ');"></div>
      </div>
    </header>

    <!-- Main Content -->
    <div class="px-40 flex flex-1 justify-center py-5">
      <div class="layout-content-container flex flex-col max-w-[960px] flex-1">

        <!-- Page Title -->
        <div class="flex flex-wrap justify-between gap-3 p-4">
          <div class="flex min-w-72 flex-col gap-3">
            <p class="text-white text-[32px] font-bold leading-tight">Portfolio</p>
            <p class="text-[#a5b6a0] text-sm font-normal leading-normal">View your investments and track performance.</p>
          </div>
        </div>

        <!-- Total Portfolio Value -->
        <div class="flex flex-wrap gap-4 p-4">
          <div class="flex min-w-[158px] flex-1 flex-col gap-2 rounded-xl p-6 bg-[#2d372a]">
            <p class="text-white text-base font-medium leading-normal">Total Portfolio Value</p>
            <p id="total-value" class="text-white tracking-light text-2xl font-bold leading-normal">RM 0.00</p>
          </div>
          <div class="flex min-w-[158px] flex-1 flex-col gap-2 rounded-xl p-6 bg-[#2d372a]">
            <p class="text-white text-base font-medium leading-normal">Dividend Income</p>
            <p id="dividend-total" class="text-green-400 tracking-light text-2xl font-bold leading-normal">RM 0.00</p>
          </div>
        </div>

        <!-- Daily Update Checklist -->
        <div style="max-width: 900px; margin: 20px auto 10px; padding: 15px; background: rgba(20, 40, 15, 0.5); border-radius: 12px; font-size: 0.95em; color: #b8e4a5; box-shadow: 0 2px 8px rgba(0,0,0,0.2); text-align: center;">
          <strong>âœ… Daily Update Checklist:</strong>
          <ol style="margin: 10px 0 0 20px; text-align: left;">
            <li>Check closing prices on <a href="https://www.sgx.com" target="_blank" style="color:#a3d98b">SGX</a> or <a href="https://www.google.com/finance" target="_blank" style="color:#a3d98b">Google Finance</a></li>
            <li>Update <strong>Current Price</strong> in this HTML</li>
            <li>Verify <strong>Gain/Loss</strong> updates automatically</li>
            <li>Save, commit, and push to GitHub</li>
          </ol>
        </div>

        <!-- Portfolio Table -->
        <div style="max-width: 900px; margin: 0 auto;">
          <h2 class="text-white text-[22px] font-bold leading-tight tracking-[-0.015em] mt-5 mb-3">Your Holdings</h2>
          <div class="flex overflow-hidden rounded-xl border border-[#42513e] bg-[#131712]">
            <table class="flex-1">
              <thead>
                <tr class="bg-[#1f251d]">
                  <th class="px-4 py-3 text-left text-white text-sm font-medium w-[120px]">Acquisition Date</th>
                  <th class="px-4 py-3 text-left text-white text-sm font-medium w-[140px]">Stock</th>
                  <th class="px-4 py-3 text-left text-white text-sm font-medium w-[100px]">Symbol</th>
                  <th class="px-4 py-3 text-left text-white text-sm font-medium w-[100px]">Quantity</th>
                  <th class="px-4 py-3 text-left text-white text-sm font-medium w-[110px]">Initial Cost</th>
                  <th class="px-4 py-3 text-left text-white text-sm font-medium w-[120px]">Current Price</th>
                  <th class="px-4 py-3 text-left text-white text-sm font-medium w-[110px]">Gain/Loss (%)</th>
                  <th class="px-4 py-3 text-left text-white text-sm font-medium w-[110px]">Gain/Loss (RM)</th>
                  <th class="px-4 py-3 text-left text-white text-sm font-medium w-[110px]">Dividend (RM)</th>
                  <th class="px-4 py-3 text-left text-white text-sm font-medium w-[140px]">Remarks</th>
                </tr>
              </thead>
              <tbody id="portfolio-tbody">
                <!-- BIOHLD -->
                <tr id="stock-biohld" class="border-t border-t-[#42513e]">
                  <td class="h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">2021-01-26</td>
                  <td class="h-[72px] px-4 py-2 text-white text-sm">BIOHLD</td>
                  <td class="h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">BIOHLD</td>
                  <td class="quantity h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">29800</td>
                  <td class="initial-cost h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">$0.283</td>
                  <td class="current-price h-[72px] px-4 py-2 text-[#a3d98b] text-sm font-bold" style="cursor:help" title="Click to edit manually">0.010</td>
                  <td class="gain-pct h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">0%</td>
                  <td class="gain-amount h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">$0.00</td>
                  <td class="dividend-amount h-[72px] px-4 py-2 text-[#a3d98b] text-sm">150.00</td>
                  <td class="remarks h-[72px] px-4 py-2 text-yellow-300 text-sm font-semibold">Holding long term</td>
                </tr>

                <!-- JFTECH -->
                <tr id="stock-jftech" class="border-t border-t-[#42513e]">
                  <td class="h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">2021-02-26</td>
                  <td class="h-[72px] px-4 py-2 text-white text-sm">JFTECH</td>
                  <td class="h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">JFTECH</td>
                  <td class="quantity h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">13000</td>
                  <td class="initial-cost h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">$1.413</td>
                  <td class="current-price h-[72px] px-4 py-2 text-[#a3d98b] text-sm font-bold" style="cursor:help" title="Click to edit manually">0.425</td>
                  <td class="gain-pct h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">0%</td>
                  <td class="gain-amount h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">$0.00</td>
                  <td class="dividend-amount h-[72px] px-4 py-2 text-[#a3d98b] text-sm">80.00</td>
                  <td class="remarks h-[72px] px-4 py-2 text-yellow-300 text-sm font-semibold">Holding for long term</td>
                </tr>

                <!-- Top Glove -->
                <tr id="stock-topglove" class="border-t border-t-[#42513e]">
                  <td class="h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">2021-01-21</td>
                  <td class="h-[72px] px-4 py-2 text-white text-sm">Top Glove</td>
                  <td class="h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">Top Glove</td>
                  <td class="quantity h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">7100</td>
                  <td class="initial-cost h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">$5.235</td>
                  <td class="current-price h-[72px] px-4 py-2 text-[#a3d98b] text-sm font-bold" style="cursor:help" title="Click to edit manually">0.595</td>
                  <td class="gain-pct h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">0%</td>
                  <td class="gain-amount h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">$0.00</td>
                  <td class="dividend-amount h-[72px] px-4 py-2 text-[#a3d98b] text-sm">200.00</td>
                  <td class="remarks h-[72px] px-4 py-2 text-yellow-300 text-sm font-semibold">Holding for long term</td>
                </tr>

                <!-- Greatech -->
                <tr id="stock-greatech" class="border-t border-t-[#42513e]">
                  <td class="h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">2021-03-15</td>
                  <td class="h-[72px] px-4 py-2 text-white text-sm">Greatech</td>
                  <td class="h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">Greatech</td>
                  <td class="quantity h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">4000</td>
                  <td class="initial-cost h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">$2.500</td>
                  <td class="current-price h-[72px] px-4 py-2 text-[#a3d98b] text-sm font-bold" style="cursor:help" title="Click to edit manually">1.600</td>
                  <td class="gain-pct h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">0%</td>
                  <td class="gain-amount h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">$0.00</td>
                  <td class="dividend-amount h-[72px] px-4 py-2 text-[#a3d98b] text-sm">120.00</td>
                  <td class="remarks h-[72px] px-4 py-2 text-yellow-300 text-sm font-semibold">Holding for long term</td>
                </tr>

                <!-- Tenaga -->
                <tr id="stock-tenaga" class="border-t border-t-[#42513e]">
                  <td class="h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">2021-01-21</td>
                  <td class="h-[72px] px-4 py-2 text-white text-sm">Tenaga</td>
                  <td class="h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">Tenaga</td>
                  <td class="quantity h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">1000</td>
                  <td class="initial-cost h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">$9.80</td>
                  <td class="current-price h-[72px] px-4 py-2 text-[#a3d98b] text-sm font-bold" style="cursor:help" title="Click to edit manually">13.800</td>
                  <td class="gain-pct h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">0%</td>
                  <td class="gain-amount h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">$0.00</td>
                  <td class="dividend-amount h-[72px] px-4 py-2 text-[#a3d98b] text-sm">300.00</td>
                  <td class="remarks h-[72px] px-4 py-2 text-yellow-300 text-sm font-semibold">Holding for long term</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Total Gain -->
          <p id="total-gain" style="text-align: right; font-size: 0.9em; margin: 0 20px; color: #b8e4a5;">Calculating...</p>

          <!-- Last Updated -->
          <p style="text-align: right; color: #8aad80; font-size: 0.9em; margin: 10px 20px 0 0; font-style: italic;">
            âœ… Last updated: Apr 6, 2025 | Manual update by Magane
          </p>
        </div>
      </div>
    </div>

    <!-- ================ -->
    <!-- SHARED SCRIPT -->
    <!-- ================ -->
    <script>
      // ================
      // 1. DARK/LIGHT MODE TOGGLE
      // ================
      function initTheme() {
        const saved = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const theme = saved || (prefersDark ? 'dark' : 'light');
        
        document.documentElement.classList.add(theme);
        updateThemeIcon(theme);
      }

      function toggleTheme() {
        const current = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
        const newTheme = current === 'light' ? 'dark' : 'light';
        
        document.documentElement.classList.remove(current);
        document.documentElement.classList.add(newTheme);
        localStorage.setItem('theme', newTheme);
        updateThemeIcon(newTheme);
      }

      function updateThemeIcon(theme) {
        const icon = document.getElementById('theme-toggle-icon');
        if (icon) {
          icon.className = theme === 'dark' 
            ? 'ri-sun-line text-yellow-300' 
            : 'ri-moon-line text-gray-700';
        }
      }

      // ================
      // 2. DIVIDEND TRACKING
      // ================
      function updateDividendTotal() {
        let total = 0;
        document.querySelectorAll('.dividend-amount').forEach(cell => {
          const value = parseFloat(cell.textContent.replace(/[^0-9.-]/g, ''));
          if (!isNaN(value)) total += value;
        });
        const totalCell = document.getElementById('dividend-total');
        if (totalCell) {
          totalCell.textContent = `RM ${total.toFixed(2)}`;
        }
      }

      // ================
      // 3. PDF EXPORT
      // ================
      function exportToPDF() {
        const printContent = `
          <html>
          <head>
            <title>Blessing in Disguise Portfolio</title>
            <style>
              body { font-family: Arial, sans-serif; padding: 20px; background: white; color: black; }
              h1, h2 { color: #2d5218; }
              table { width: 100%; border-collapse: collapse; margin: 20px 0; }
              th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
              th { background: #e0f2d8; }
              .footer { margin-top: 40px; font-size: 0.9em; color: #555; }
            </style>
          </head>
          <body>
            <h1>Blessing in Disguise Portfolio</h1>
            <p>Appa and Magane | Investment Journey | ${new Date().toLocaleDateString()}</p>
            <div id="portfolio">${document.querySelector('#portfolio-tbody')?.outerHTML || ''}</div>
            <div class="footer">
              <p>Total Portfolio Value: <strong>${document.getElementById('total-value')?.textContent || 'RM 0.00'}</strong></p>
              <p>Total P&L: <strong>${document.getElementById('total-gain')?.textContent || 'Calculating...'}</strong></p>
              <p>Dividend Income: <strong>${document.getElementById('dividend-total')?.textContent || 'RM 0.00'}</strong></p>
              <p>Generated from MahaVishnu Legacy. May Riddhi and Sidhi be with us.</p>
            </div>
          </body>
          </html>
        `;
        
        const printWin = window.open('', '', 'width=800,height=600');
        printWin.document.open();
        printWin.document.write(printContent);
        printWin.document.close();
        printWin.print();
      }

      // ================
      // 4. AUTO-CALCULATE GAIN/LOSS & TOTALS
      // ================
      function formatCurrency(value) {
        return new Intl.NumberFormat('en-MY', {
          style: 'decimal',
          minimumFractionDigits: 2,
          maximumFractionDigits: 2
        }).format(value);
      }

      function updatePortfolio() {
        let totalValue = 0;
        let totalInvested = 0;

        document.querySelectorAll('tr[id^="stock-"]').forEach(row => {
          const quantity = parseFloat(row.querySelector('.quantity').textContent);
          const initialCost = parseFloat(row.querySelector('.initial-cost').textContent.replace('$', ''));
          const currentPrice = parseFloat(row.querySelector('.current-price').textContent);

          const currentValue = currentPrice * quantity;
          const investedValue = initialCost * quantity;
          const profit = currentValue - investedValue;
          const percentage = investedValue !== 0 ? (profit / investedValue) * 100 : 0;

          totalValue += currentValue;
          totalInvested += investedValue;

          const gainAmountCell = row.querySelector('.gain-amount');
          const gainPctCell = row.querySelector('.gain-pct');

          gainAmountCell.textContent = profit >= 0 
            ? `+RM ${formatCurrency(Math.abs(profit))}` 
            : `-RM ${formatCurrency(Math.abs(profit))}`;
          gainPctCell.textContent = percentage >= 0 
            ? `+${percentage.toFixed(2)}%` 
            : `${percentage.toFixed(2)}%`;

          gainAmountCell.className = profit >= 0 
            ? 'text-green-500 text-sm font-normal leading-normal' 
            : 'text-red-500 text-sm font-normal leading-normal';
          gainPctCell.className = percentage >= 0 
            ? 'text-green-500 text-sm font-normal leading-normal' 
            : 'text-red-500 text-sm font-normal leading-normal';
        });

        // Update totals
        document.getElementById('total-value').textContent = `RM ${formatCurrency(totalValue)}`;
        document.getElementById('total-gain').textContent = `Total P&L: RM ${formatCurrency(totalValue - totalInvested)} (${((totalValue - totalInvested)/totalInvested * 100).toFixed(2)}%)`;
        document.getElementById('total-gain').style.color = (totalValue - totalInvested) >= 0 ? '#4ade80' : '#f87171';

        // Update dividend total
        updateDividendTotal();
      }

      // Run on load
      document.addEventListener('DOMContentLoaded', () => {
        initTheme();
        updatePortfolio();
      });
    </script>

    <!-- Theme Toggle Button -->
    <div class="fixed bottom-6 right-6 z-50">
      <button 
        onclick="toggleTheme()" 
        class="w-12 h-12 bg-indigo-600 rounded-full flex items-center justify-center text-white shadow-lg hover:shadow-xl transition-all duration-300"
        title="Toggle Dark/Light Mode">
        <i id="theme-toggle-icon" class="ri-moon-line text-lg"></i>
      </button>
    </div>

    <!-- PDF Export Button -->
    <div class="flex justify-center mt-8">
      <button 
        onclick="exportToPDF()" 
        class="px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-bold rounded-lg hover:shadow-2xl transition-all duration-300 whitespace-nowrap">
        ðŸ“„ Export to PDF
      </button>
    </div>

  </body>
</html>
