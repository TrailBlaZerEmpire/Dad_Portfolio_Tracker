<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Portfolio Design</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="stylesheet" as="style" onload="this.rel='stylesheet'" href="https://fonts.googleapis.com/css2?display=swap&family=Manrope:wght@400;500;700;800&family=Noto+Sans:wght@400;500;700;900" />

  <!-- Tailwind CSS - CLEAN URL -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Remix Icons -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">

  <!-- Custom Styles -->
  <style>
    /* Force the exact background */
    body {
      background: linear-gradient(135deg, #0f1b07, #1a2e10);
      background-image: radial-gradient(circle at 1px 1px, rgba(255,255,255,0.1) 1px, transparent 0);
      background-size: 50px 50px;
      background-attachment: fixed;
      margin: 0;
      min-height: 100vh;
      font-family: 'Manrope', 'Noto Sans', sans-serif;
    }

    /* Text colors */
    .text-green-500 { color: #4ade80; }
    .text-red-500 { color: #f87171; }
    .text-yellow-300 { color: #fde047; }
    td { transition: color 0.3s ease; }
  </style>
</head>

<body class="text-white">

  <!-- Header -->
  <header class="flex items-center justify-between border-b border-solid border-b-gray-700 px-10 py-3 bg-black">
    <div class="flex items-center gap-8">
      <div class="flex items-center gap-4">
        <div class="size-4">
          <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M44 4H30.6666V17.3334H17.3334V30.6666H4V44H44V4Z" fill="currentColor"></path>
          </svg>
        </div>
        <h2 class="text-white text-lg font-bold">MahaVishnu Legacy</h2>
      </div>
      <nav class="flex items-center gap-9 text-sm">
        <a class="text-white" href="index.html">Home</a>
        <a class="text-white" href="Portfolio.html">Portfolio</a>
        <a class="text-white" href="#">Learn</a>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <div class="px-40 py-5">
    <div class="max-w-4xl mx-auto">

      <!-- Title -->
      <div class="p-4">
        <h1 class="text-3xl font-bold text-white">Portfolio</h1>
        <p class="text-gray-400">View your investments and track performance.</p>
      </div>

      <!-- Totals -->
      <div class="flex flex-wrap gap-4 p-4">
        <div class="flex-1 p-6 bg-gray-800 rounded-xl">
          <p class="text-white">Total Portfolio Value</p>
          <p id="total-value" class="text-2xl font-bold text-white">RM 0.00</p>
        </div>
        <div class="flex-1 p-6 bg-gray-800 rounded-xl">
          <p class="text-white">Dividend Income</p>
          <p id="dividend-total" class="text-2xl font-bold text-green-400">RM 0.00</p>
        </div>
      </div>

      <!-- Checklist -->
      <div style="
        max-width: 900px;
        margin: 20px auto;
        padding: 15px;
        background: rgba(20, 40, 15, 0.5);
        border-radius: 12px;
        font-size: 0.95em;
        color: #b8e4a5;
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        text-align: center;
      ">
        <strong>âœ… Daily Update Checklist:</strong>
        <ol style="margin: 10px 0 0 20px; text-align: left;">
          <li>Check prices on <a href="https://www.sgx.com" target="_blank" style="color:#a3d98b">SGX</a> or <a href="https://www.google.com/finance" target="_blank" style="color:#a3d98b">Google Finance</a></li>
          <li>Update <strong>Current Price</strong></li>
          <li>Save, commit, push to GitHub</li>
        </ol>
      </div>

      <!-- Table -->
      <div style="max-width: 900px; margin: 0 auto;">
        <h2 class="text-white text-xl font-bold mt-5 mb-3">Your Holdings</h2>
        <table class="w-full border border-gray-600 rounded-xl overflow-hidden">
          <thead class="bg-gray-800">
            <tr>
              <th class="px-4 py-3 text-left text-sm font-medium">Date</th>
              <th class="px-4 py-3 text-left text-sm font-medium">Stock</th>
              <th class="px-4 py-3 text-left text-sm font-medium">Qty</th>
              <th class="px-4 py-3 text-left text-sm font-medium">Cost</th>
              <th class="px-4 py-3 text-left text-sm font-medium">Current</th>
              <th class="px-4 py-3 text-left text-sm font-medium">Gain (%)</th>
              <th class="px-4 py-3 text-left text-sm font-medium">Gain (RM)</th>
              <th class="px-4 py-3 text-left text-sm font-medium">Dividend</th>
            </tr>
          </thead>
          <tbody id="portfolio-tbody">
            <tr class="border-t border-gray-600">
              <td class="px-4 py-2 text-sm text-gray-400">2021-01-26</td>
              <td class="px-4 py-2 text-white text-sm">BIOHLD</td>
              <td class="quantity px-4 py-2 text-sm">29800</td>
              <td class="initial-cost px-4 py-2 text-sm">$0.283</td>
              <td class="current-price px-4 py-2 font-bold text-green-400">0.010</td>
              <td class="gain-pct px-4 py-2 text-sm">0%</td>
              <td class="gain-amount px-4 py-2 text-sm">$0.00</td>
              <td class="dividend-amount px-4 py-2 text-sm">150.00</td>
            </tr>
            <tr class="border-t border-gray-600">
              <td class="px-4 py-2 text-sm text-gray-400">2021-02-26</td>
              <td class="px-4 py-2 text-white text-sm">JFTECH</td>
              <td class="quantity px-4 py-2 text-sm">13000</td>
              <td class="initial-cost px-4 py-2 text-sm">$1.413</td>
              <td class="current-price px-4 py-2 font-bold text-green-400">0.425</td>
              <td class="gain-pct px-4 py-2 text-sm">0%</td>
              <td class="gain-amount px-4 py-2 text-sm">$0.00</td>
              <td class="dividend-amount px-4 py-2 text-sm">80.00</td>
            </tr>
          </tbody>
        </table>

        <p id="total-gain" style="text-align: right; font-size: 0.9em; margin: 10px 20px; color: #b8e4a5;">Calculating...</p>
      </div>
    </div>
  </div>

  <!-- Script -->
  <script>
    // Format currency with commas
    function formatCurrency(value) {
      return new Intl.NumberFormat('en-MY', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      }).format(value);
    }

    // Update portfolio
    window.addEventListener('DOMContentLoaded', () => {
      let totalValue = 0;
      let totalInvested = 0;

      document.querySelectorAll('#portfolio-tbody tr').forEach(row => {
        const quantity = parseFloat(row.querySelector('.quantity').textContent);
        const initialCost = parseFloat(row.querySelector('.initial-cost').textContent.replace('$', ''));
        const currentPrice = parseFloat(row.querySelector('.current-price').textContent);

        const currentValue = currentPrice * quantity;
        const investedValue = initialCost * quantity;
        const profit = currentValue - investedValue;
        const percentage = investedValue ? (profit / investedValue) * 100 : 0;

        totalValue += currentValue;
        totalInvested += investedValue;

        const gainAmountCell = row.querySelector('.gain-amount');
        const gainPctCell = row.querySelector('.gain-pct');

        gainAmountCell.textContent = profit >= 0 
          ? `+RM ${formatCurrency(Math.abs(profit))}` 
          : `-RM ${formatCurrency(Math.abs(profit))}`;
        gainPctCell.textContent = percentage >= 0 
          ? `+${percentage.toFixed(2)}%` 
          : `${percentage.toFixed(2)}%`;

        gainAmountCell.className = profit >= 0 ? 'text-green-500' : 'text-red-500';
        gainPctCell.className = percentage >= 0 ? 'text-green-500' : 'text-red-500';
      });

      document.getElementById('total-value').textContent = `RM ${formatCurrency(totalValue)}`;
      document.getElementById('total-gain').textContent = 
        `Total P&L: RM ${formatCurrency(totalValue - totalInvested)} (${((totalValue - totalInvested)/totalInvested * 100).toFixed(2)}%)`;
      document.getElementById('total-gain').style.color = (totalValue - totalInvested) >= 0 ? '#4ade80' : '#f87171';

      // Dividend total
      let dividendTotal = 0;
      document.querySelectorAll('.dividend-amount').forEach(cell => {
        dividendTotal += parseFloat(cell.textContent);
      });
      document.getElementById('dividend-total').textContent = `RM ${dividendTotal.toFixed(2)}`;
    });
  </script>

  <!-- Buttons -->
  <div class="fixed bottom-6 right-6">
    <button class="w-10 h-10 bg-indigo-600 rounded-full text-white flex items-center justify-center" onclick="document.body.classList.toggle('dark')">ðŸŒ™</button>
  </div>
  <div class="flex justify-center my-8">
    <button onclick="window.print()" class="px-6 py-3 bg-indigo-600 text-white rounded-lg">ðŸ“„ Export to PDF</button>
  </div>
</body>
</html>
