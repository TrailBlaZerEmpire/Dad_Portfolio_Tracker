<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Portfolio Design</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="stylesheet" as="style" onload="this.rel='stylesheet'" href="https://fonts.googleapis.com/css2?display=swap&family=Manrope:wght@400;500;700;800&family=Noto+Sans:wght@400;500;700;900" />

  <!-- Tailwind CSS (CLEAN URL - no spaces) -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />

  <!-- Custom Styles -->
  <style>
    /* Permanent dark background to match index.html */
    body {
      background: linear-gradient(135deg, #0f1b07, #1a2e10);
      background-image: radial-gradient(circle at 1px 1px, rgba(255,255,255,0.1) 1px, transparent 0);
      background-size: 50px 50px;
      background-attachment: fixed;
      min-height: 100vh;
      margin: 0;
      font-family: Manrope, 'Noto Sans', sans-serif;
    }

    /* Text colors */
    .text-green-500 { color: #4ade80; }
    .text-red-500 { color: #f87171; }
    .text-yellow-300 { color: #fde047; }

    /* Smooth color transitions */
    td { transition: color 0.3s ease; }
  </style>
</head>

<body class="relative flex size-full min-h-screen flex-col overflow-x-hidden">
  <div class="layout-container flex h-full grow flex-col">

    <!-- Header -->
    <header class="flex items-center justify-between border-b border-solid border-b-[#2d372a] px-10 py-3 bg-[#131712]">
      <div class="flex items-center gap-8">
        <div class="flex items-center gap-4 text-white">
          <div class="size-4">
            <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M44 4H30.6666V17.3334H17.3334V30.6666H4V44H44V4Z" fill="currentColor"></path>
            </svg>
          </div>
          <h2 class="text-white text-lg font-bold leading-tight tracking-[-0.015em]">MahaVishnu Legacy</h2>
        </div>

        <!-- Navigation -->
        <nav class="flex items-center gap-9">
          <a class="text-white text-sm font-medium leading-normal" href="index.html">Home</a>
          <a class="text-white text-sm font-medium leading-normal" href="Portfolio.html">Portfolio</a>
          <a class="text-white text-sm font-medium leading-normal" href="Learn.html">Learn</a>
        </nav>
      </div>
    </header>

    <!-- Main Content -->
    <div class="px-40 flex flex-1 justify-center py-5">
      <div class="layout-content-container flex flex-col max-w-[960px] flex-1">

        <!-- Page Title -->
        <div class="flex flex-wrap justify-between gap-3 p-4">
          <div class="flex min-w-72 flex-col gap-3">
            <p class="text-white text-[32px] font-bold leading-tight">Portfolio</p>
            <p class="text-[#a5b6a0] text-sm font-normal leading-normal">View your investments and track performance.</p>
          </div>
        </div>

        <!-- Total Portfolio Value & Dividend -->
        <div class="flex flex-wrap gap-4 p-4">
          <div class="flex min-w-[158px] flex-1 flex-col gap-2 rounded-xl p-6 bg-[#2d372a]">
            <p class="text-white text-base font-medium leading-normal">Total Portfolio Value</p>
            <p id="total-value" class="text-white tracking-light text-2xl font-bold leading-normal">RM 0.00</p>
          </div>
          <div class="flex min-w-[158px] flex-1 flex-col gap-2 rounded-xl p-6 bg-[#2d372a]">
            <p class="text-white text-base font-medium leading-normal">Dividend Income</p>
            <p id="dividend-total" class="text-green-400 tracking-light text-2xl font-bold leading-normal">RM 0.00</p>
          </div>
        </div>

        <!-- Daily Update Checklist -->
        <div style="max-width: 900px; margin: 20px auto 10px; padding: 15px; background: rgba(20, 40, 15, 0.5); border-radius: 12px; font-size: 0.95em; color: #b8e4a5; box-shadow: 0 2px 8px rgba(0,0,0,0.2); text-align: center;">
          <strong>âœ… Daily Update Checklist:</strong>
          <ol style="margin: 10px 0 0 20px; text-align: left;">
            <li>Check closing prices on <a href="https://www.sgx.com" target="_blank" style="color:#a3d98b">SGX</a> or <a href="https://www.google.com/finance" target="_blank" style="color:#a3d98b">Google Finance</a></li>
            <li>Update <strong>Current Price</strong> in this HTML</li>
            <li>Save, commit, and push to GitHub</li>
          </ol>
        </div>

        <!-- Portfolio Table -->
        <div style="max-width: 900px; margin: 0 auto;">
          <h2 class="text-white text-[22px] font-bold leading-tight tracking-[-0.015em] mt-5 mb-3">Your Holdings</h2>
          <div class="flex overflow-hidden rounded-xl border border-[#42513e] bg-[#131712]">
            <table class="flex-1">
              <thead>
                <tr class="bg-[#1f251d]">
                  <th class="px-4 py-3 text-left text-white text-sm font-medium w-[120px]">Acquisition Date</th>
                  <th class="px-4 py-3 text-left text-white text-sm font-medium w-[140px]">Stock</th>
                  <th class="px-4 py-3 text-left text-white text-sm font-medium w-[100px]">Symbol</th>
                  <th class="px-4 py-3 text-left text-white text-sm font-medium w-[100px]">Quantity</th>
                  <th class="px-4 py-3 text-left text-white text-sm font-medium w-[110px]">Initial Cost</th>
                  <th class="px-4 py-3 text-left text-white text-sm font-medium w-[120px]">Current Price</th>
                  <th class="px-4 py-3 text-left text-white text-sm font-medium w-[110px]">Gain/Loss (%)</th>
                  <th class="px-4 py-3 text-left text-white text-sm font-medium w-[110px]">Gain/Loss (RM)</th>
                  <th class="px-4 py-3 text-left text-white text-sm font-medium w-[110px]">Dividend (RM)</th>
                  <th class="px-4 py-3 text-left text-white text-sm font-medium w-[140px]">Remarks</th>
                </tr>
              </thead>
              <tbody id="portfolio-tbody">
                <!-- BIOHLD -->
                <tr id="stock-biohld" class="border-t border-t-[#42513e]">
                  <td class="h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">2021-01-26</td>
                  <td class="h-[72px] px-4 py-2 text-white text-sm">BIOHLD</td>
                  <td class="h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">BIOHLD</td>
                  <td class="quantity h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">29800</td>
                  <td class="initial-cost h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">$0.283</td>
                  <td class="current-price h-[72px] px-4 py-2 text-[#a3d98b] text-sm font-bold" style="cursor:help" title="Click to edit manually">0.010</td>
                  <td class="gain-pct h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">0%</td>
                  <td class="gain-amount h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">$0.00</td>
                  <td class="dividend-amount h-[72px] px-4 py-2 text-[#a3d98b] text-sm">150.00</td>
                  <td class="remarks h-[72px] px-4 py-2 text-yellow-300 text-sm font-semibold">Holding long term</td>
                </tr>

                <!-- JFTECH -->
                <tr id="stock-jftech" class="border-t border-t-[#42513e]">
                  <td class="h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">2021-02-26</td>
                  <td class="h-[72px] px-4 py-2 text-white text-sm">JFTECH</td>
                  <td class="h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">JFTECH</td>
                  <td class="quantity h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">13000</td>
                  <td class="initial-cost h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">$1.413</td>
                  <td class="current-price h-[72px] px-4 py-2 text-[#a3d98b] text-sm font-bold" style="cursor:help" title="Click to edit manually">0.425</td>
                  <td class="gain-pct h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">0%</td>
                  <td class="gain-amount h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">$0.00</td>
                  <td class="dividend-amount h-[72px] px-4 py-2 text-[#a3d98b] text-sm">80.00</td>
                  <td class="remarks h-[72px] px-4 py-2 text-yellow-300 text-sm font-semibold">Holding for long term</td>
                </tr>

                <!-- Top Glove -->
                <tr id="stock-topglove" class="border-t border-t-[#42513e]">
                  <td class="h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">2021-01-21</td>
                  <td class="h-[72px] px-4 py-2 text-white text-sm">Top Glove</td>
                  <td class="h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">Top Glove</td>
                  <td class="quantity h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">7100</td>
                  <td class="initial-cost h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">$5.235</td>
                  <td class="current-price h-[72px] px-4 py-2 text-[#a3d98b] text-sm font-bold" style="cursor:help" title="Click to edit manually">0.595</td>
                  <td class="gain-pct h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">0%</td>
                  <td class="gain-amount h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">$0.00</td>
                  <td class="dividend-amount h-[72px] px-4 py-2 text-[#a3d98b] text-sm">200.00</td>
                  <td class="remarks h-[72px] px-4 py-2 text-yellow-300 text-sm font-semibold">Holding for long term</td>
                </tr>

                <!-- Greatech -->
                <tr id="stock-greatech" class="border-t border-t-[#42513e]">
                  <td class="h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">2021-03-15</td>
                  <td class="h-[72px] px-4 py-2 text-white text-sm">Greatech</td>
                  <td class="h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">Greatech</td>
                  <td class="quantity h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">4000</td>
                  <td class="initial-cost h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">$2.500</td>
                  <td class="current-price h-[72px] px-4 py-2 text-[#a3d98b] text-sm font-bold" style="cursor:help" title="Click to edit manually">1.600</td>
                  <td class="gain-pct h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">0%</td>
                  <td class="gain-amount h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">$0.00</td>
                  <td class="dividend-amount h-[72px] px-4 py-2 text-[#a3d98b] text-sm">120.00</td>
                  <td class="remarks h-[72px] px-4 py-2 text-yellow-300 text-sm font-semibold">Holding for long term</td>
                </tr>

                <!-- Tenaga -->
                <tr id="stock-tenaga" class="border-t border-t-[#42513e]">
                  <td class="h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">2021-01-21</td>
                  <td class="h-[72px] px-4 py-2 text-white text-sm">Tenaga</td>
                  <td class="h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">Tenaga</td>
                  <td class="quantity h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">1000</td>
                  <td class="initial-cost h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">$9.80</td>
                  <td class="current-price h-[72px] px-4 py-2 text-[#a3d98b] text-sm font-bold" style="cursor:help" title="Click to edit manually">13.800</td>
                  <td class="gain-pct h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">0%</td>
                  <td class="gain-amount h-[72px] px-4 py-2 text-[#a5b6a0] text-sm">$0.00</td>
                  <td class="dividend-amount h-[72px] px-4 py-2 text-[#a3d98b] text-sm">300.00</td>
                  <td class="remarks h-[72px] px-4 py-2 text-yellow-300 text-sm font-semibold">Holding for long term</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Total Gain -->
          <p id="total-gain" style="text-align: right; font-size: 0.9em; margin: 0 20px; color: #b8e4a5;">Calculating...</p>

          <!-- Last Updated -->
          <p style="text-align: right; color: #8aad80; font-size: 0.9em; margin: 10px 20px 0 0; font-style: italic;">
            âœ… Last updated: Apr 6, 2025 | Manual update by Magane
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- ================ -->
  <!-- AUTO-CALCULATION SCRIPT -->
  <!-- ================ -->
  <script>
    // Format number with commas and 2 decimals
    function formatCurrency(value) {
      return new Intl.NumberFormat('en-MY', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      }).format(value);
    }

    // Run when page loads
    document.addEventListener('DOMContentLoaded', function () {
      let totalValue = 0;
      let totalInvested = 0;

      // Update each stock
      document.querySelectorAll('tr[id^="stock-"]').forEach(row => {
        const quantity = parseFloat(row.querySelector('.quantity').textContent);
        const initialCost = parseFloat(row.querySelector('.initial-cost').textContent.replace('$', ''));
        const currentPrice = parseFloat(row.querySelector('.current-price').textContent);

        const currentValue = currentPrice * quantity;
        const investedValue = initialCost * quantity;
        const profit = currentValue - investedValue;
        const percentage = investedValue !== 0 ? (profit / investedValue) * 100 : 0;

        totalValue += currentValue;
        totalInvested += investedValue;

        const gainAmountCell = row.querySelector('.gain-amount');
        const gainPctCell = row.querySelector('.gain-pct');

        gainAmountCell.textContent = profit >= 0 
          ? `+RM ${formatCurrency(Math.abs(profit))}` 
          : `-RM ${formatCurrency(Math.abs(profit))}`;
        gainPctCell.textContent = percentage >= 0 
          ? `+${percentage.toFixed(2)}%` 
          : `${percentage.toFixed(2)}%`;

        gainAmountCell.className = profit >= 0 
          ? 'text-green-500 text-sm font-normal leading-normal' 
          : 'text-red-500 text-sm font-normal leading-normal';
          
        gainPctCell.className = percentage >= 0 
          ? 'text-green-500 text-sm font-normal leading-normal' 
          : 'text-red-500 text-sm font-normal leading-normal';
      });

      // Update total portfolio value
      document.getElementById('total-value').textContent = `RM ${formatCurrency(totalValue)}`;

      // Update total gain/loss
      const totalGain = totalValue - totalInvested;
      const totalGainPct = totalInvested !== 0 ? (totalGain / totalInvested) * 100 : 0;
      document.getElementById('total-gain').textContent = 
        `Total P&L: RM ${formatCurrency(totalGain)} (${totalGainPct >= 0 ? '+' : ''}${totalGainPct.toFixed(2)}%)`;
      document.getElementById('total-gain').style.color = totalGain >= 0 ? '#4ade80' : '#f87171';

      // Update dividend total
      let dividendTotal = 0;
      document.querySelectorAll('.dividend-amount').forEach(cell => {
        dividendTotal += parseFloat(cell.textContent);
      });
      document.getElementById('dividend-total').textContent = `RM ${dividendTotal.toFixed(2)}`;
    });
  </script>

  <!-- PDF Export Button -->
  <div class="flex justify-center mt-8 mb-8">
    <button 
      onclick="window.print()" 
      class="px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-bold rounded-lg hover:shadow-2xl transition-all duration-300 whitespace-nowrap">
      ðŸ“„ Export to PDF
    </button>
  </div>

</body>
</html>
